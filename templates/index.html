<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="{{ url_for('static',filename='index.css') }}">
  <title>Taipei Weather</title>
  <link rel="icon" href="{{ url_for('static',filename='icon.jpg') }}">
  <script>
    function closeMenu() {
      document.getElementById("sidebar").style.zIndex = "-1";
      document.getElementById("open-button").style.zIndex = "100";
    }
    function openMenu() {
      document.getElementById("sidebar").style.zIndex = "100";
      document.getElementById("open-button").style.zIndex = "-1";
    }
  </script>
  {% if weather %}
  {% set config = IMPORT('config') %}
  {% endif %}
</head>

<body>
  <div id="sidebar">
    <button onclick="closeMenu();" class="close_menu">Close &times;</button>
    <div><a href="/" class="link" style="margin: 5px;">HomePage</a></div>
    <div><a href="/forecast" class="link" style="margin: 5px;">Forecast</a></div>
  </div>
  <div>
    <button onclick="openMenu();" class="open_menu" id="open-button">&#9776;</button>
  </div>
  {% if weather %}<img src="{{ url_for('static',filename='districts/%s.jpg'%site) }}" alt="{{ site }}">{% endif %}
  <div id="weather_form">
    <form action="/" , method="POST">
      <select name="site" id="site" required>
        <option value="北投區">北投區</option>
        <option value="松山區">松山區</option>
        <option value="士林區">士林區</option>
        <option value="內湖區">內湖區</option>
        <option value="中山區">中山區</option>
        <option value="中正區">中正區</option>
        <option value="信義區">信義區</option>
        <option value="大安區">大安區</option>
        <option value="文山區">文山區</option>
        <option value="南港區">南港區</option>
        <option value="大同區">大同區</option>
        <option value="萬華區">萬華區</option>
      </select>
      <input type="submit" value="查詢">
    </form>
  </div>
  {% if weather %}
  <div>last update: {{ last_update }}</div>
  {% for factor in weather %}
  {{ config.barometer_to_chinese[factor['elementName']] }}
  {% if factor['elementName'] == 'HUMD' %}
  {# use percentage for humidity #}
  {{ (factor['elementValue'] | float) * 100 }}{{ config.units[factor['elementName']] }}
  {% else %}
  {{ factor['elementValue'] }}{{ config.units[factor['elementName']] }}
  {% endif %}
  {% endfor %}
  {% endif %}
  <footer>
    <span>© 2020 <a href="https://github.com/SiriusKoan" target="_blank">SiriusKoan</a> & Red</span>
  </footer>
  <div id="bg">
    <img
      src="{% if weather %}{{ url_for('static',filename='background/%s.png'%site) }}{% else %}{{ url_for('static',filename='background/default.png') }}{% endif %}" usemap="#taipei-map">
      <map name="taipei-map">
        <area target="" alt="" title="" href="" coords="526,526,527,544,507,549,502,563,521,589,540,613,567,614,581,607,593,613,605,612,577,568,586,557,583,521" shape="poly">
    </map>
  </div>
</body>

</html>